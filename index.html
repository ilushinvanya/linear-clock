<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Linear clock</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <link href="styles/style.css" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⌚️</text></svg>">

</head>
<body>

<script src="scripts/p5.min.js"></script>
<script src="scripts/script.js"></script>
<script type="module">
    import { Pane } from 'https://cdn.jsdelivr.net/npm/tweakpane@4.0.1/dist/tweakpane.min.js';
    const pane = new Pane();
    window.PARAMS = {
        all_lines: all_lines,
        fps: 0,
    };

    const b = pane.addBinding(
            PARAMS, 'all_lines',
            {
                min: 10,
                max: 1500,
                step: 1,
                readonly: true
            }
    );
    pane.addBinding(
            PARAMS, 'fps',
            {
                min: 1,
                max: 80,
                step: 1,
                readonly: true
            }
    );


    function fpsMeter(){
        let prevTime = Date.now(),
                frames = 0;

        requestAnimationFrame(function loop() {
            const time = Date.now();
            frames++;
            if (time > prevTime + 1000) {
                let fps = Math.round( ( frames * 1000 ) / ( time - prevTime ) );
                prevTime = time;
                frames = 0;
                PARAMS.fps = fps
            }

            requestAnimationFrame(loop);
        });
    }
    fpsMeter();
</script>
</body>
</html>